= bin
// vim: sw=2 tw=72

Various scripts I use.

== Exposition

I have a few scripts in here that I think are worth talking about.

=== beets tools

Many of the tools I've written recently have been in service of making Beets,
the command-line music organizer, nicer to use.

=== `beets-import-to-library`

:beets-servicemenu: ../share/kio/servicemenus/beets.desktop

The idea here is to provide a semi-interactive script for importing albums into
the Beets library, allowing the user to break out into more manual usage of
`beet import <album>...` when necessary.

I recently started using KDE Plasma as my main desktop environment after years
of using a `bspwm` based setup, and so I've sought to integrate it into some
typical use cases. Consequentially, there's a KIO service menu for this tool
located at link:{beets-servicemenu}[`{beets-servicemenu}`]. It provides a nice
menu item, and that's the primary way I interact with it.

Here's a thousand words:

.link:{beets-servicemenu}[The menu item], as shown in Dolphin
image:../img/beets-import-to-library%20%28menu%20item%29.png[A popup menu
created by a right-click action on a directory named "Phish - Slip Stitch and
Pass (1997)", with the menu item "Import to music library..." highlighted by
the mouse cursor.]

.Notification of import starting soon
image:../img/beets-import-to-library%20%28importing%29.png[A desktop
notification as produced by KDE Plasma, titled "Importing..." and the directory
name mentioned previously as the notification message content. Two buttons are
on the notification, one labeled "Import manually..." and the other labeled
"Skip".]

.Notification of successful import
image:../img/beets-import-to-library%20%28imported%29.png[A desktop
notification as produced by KDE Plasma, titled "Music imported to library" with
the message content "Successfully imported Phish - Slip Stitch and Pass (1997)
using metadata from MusicBrainz." Four buttons are on the notification, labeled
respectively from left to right, "Play", "Open directory", "Undo", and "Reimport
manually..." The notification has an icon on the top right that features the
album's cover art.]

==== `beet-hook-diff-{pluginload,cli_exit}`

These two scripts work to provide a hook for Beets that shows a diff containing
all the changes that happened to its `library.db` during its run.

They both require that `sqlite3` be present in the `$PATH`.

To use these hooks properly, both need to be declared in Beets' config:

.beets `config.yaml` excerpt
[source,yaml]
----
plugins:
  - hook

hook:
  hooks:
    - event: pluginload
      command: beet-hook-diff-pluginload
    - event: cli_exit
      command: beet-hook-diff-cli_exit
----

=== `upload`

A script for uploading files to services like 0x0.st (which it defaults to).

It was once packaged in nixpkgs, but isn't anymore since the URL to it in my
previous dotfiles repository became invalid. Maybe again someday.

== License

All scripts are in the public domain.

To the extent possible under law, Kylie McClain <kylie@somas.is>
has waived all copyright and related or neighboring rights to this work.

http://creativecommons.org/publicdomain/zero/1.0/
