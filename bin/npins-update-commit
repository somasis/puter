#!/usr/bin/env bash
#!/usr/bin/env nix-shell
#! nix-shell -i bash -p bash npins

set -euo pipefail

edo() {
    local arg string
    string=
    for arg; do
        if [[ ${arg@Q} == "'$arg'" ]] && ! [[ ${arg} =~ [[:blank:]] ]]; then
            string+="${string:+ }$arg"
        else
            string+="${string:+ }${arg@Q}"
        fi
    done

    printf '$ %s\n' "${string}" >&2
    # alt: printf '$ %s\n' "$(condquote "$@")" >&2

    "$@"
}

edo npins update "$@"
edo git commit -m 'npins: update' npins/
